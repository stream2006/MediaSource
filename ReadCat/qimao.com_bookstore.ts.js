plugin.exports=class a{static ID="kKGDvE-nIvKgd3P2bMBMW";static TYPE=plugin.type.BOOK_STORE;static GROUP="ðŸ¼é»˜è®¤";static NAME="ä¸ƒçŒ«ä¸­æ–‡ç½‘(ä¹¦åŸŽ)";static VERSION="1.0.0";static VERSION_CODE=0;static PLUGIN_FILE_URL="https://gitee.com/panda13/read-cat-plugin/releases/download/lasted/qimao.com_bookstore.ts.js";static BASE_URL="https://www.qimao.com";static REQUIRE={maxPageNumber:{label:"æœ€å¤§é¡µæ•°",type:"number",default:5}};static DEPRECATED=void 0;request;cheerio;constructor(t){var{request:t,cheerio:a}=t;this.request=t,this.cheerio=a}get config(){return{"æŽ’è¡Œæ¦œ-ç”·ç”Ÿ":()=>this.paihang(!1),"æŽ’è¡Œæ¦œ-å¥³ç”Ÿ":()=>this.paihang(!0),"çŽ°ä»£è¨€æƒ…":()=>this.shuku(1),"å¤ä»£è¨€æƒ…":()=>this.shuku(2),"çŽ„å¹»å¥‡å¹»":()=>this.shuku(202),"æ­¦ä¾ ä»™ä¾ ":()=>this.shuku(205),"åŽ†å²":()=>this.shuku(56),"å†›äº‹":()=>this.shuku(60),"ç§‘å¹»":()=>this.shuku(64),"éƒ½å¸‚":()=>this.shuku(203)}}get maxPageNumber(){var t=Math.floor(a.REQUIRE.maxPageNumber.value);if(t<=0||10<t)throw new Error("æœ€å¤§é¡µæ•° â‰¤0 æˆ– >10");return t}async paihang(e){var i=[];for(let t=1;t<=this.maxPageNumber;t++){var s=(await this.request.get(a.BASE_URL+"/api/rank/book-list",{params:{is_girl:e?1:0,rank_type:1,date_type:1,page:t},responseType:"json"})).body,{page_size:r,count:o}=s.data.page_data,o=Math.ceil(Number(o)/Number(r));if(i.push(...s.data.table_data.map(({title:t,author:a,image_link:e,intro:i})=>({bookname:t,author:a,coverImageUrl:e,intro:i}))),t===o)break}return i}async shuku(e){var i=[];for(let t=1;t<=this.maxPageNumber;t++){var s,r=(await this.request.get(`${a.BASE_URL}/shuku/a-${e}-a-a-a-a-a-click-${t}/`)).body,o=this.cheerio(r);for(s of o("div.con-box.books-pic-con.js-list-data > ul > li")){var u=o(s),h=u.find("div.pic a img").attr("src"),n=u.find("div.txt span.s-tit a").text(),c=u.find("div.txt span.des").text(),u=u.find("div.txt p.p-bottom-inline span").html().split("&nbsp;")[0];i.push({bookname:n,author:u,coverImageUrl:h,intro:c})}}return i}};